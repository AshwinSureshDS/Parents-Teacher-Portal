<!DOCTYPE html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tiny Wonders - Student Portal</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Reem+Kufi+Fun:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      html {
        height: 100%;
        overflow: hidden; /* Prevent all scrolling */
      }

      body {
        margin: 0;
        padding: 0;
        font-family: "Reem Kufi Fun", Arial, sans-serif;
        background-color: #e8f7e8;
        background-image: url("static/images/49661332_9286496.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        height: 100%;
        overflow: hidden; /* Add this to prevent body scrolling */
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 10px;
        position: relative;
        overflow: hidden; /* Change from overflow-x: hidden to overflow: hidden */
        height: calc(100% - 20px); /* Add height calculation */
      }

      .header {
        text-align: center;
        margin-bottom: 10px;
      }

      .logo {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 10px;
      }

      .logo img {
        height: 70px;
      }

      .nav-bar {
        background-color: white;
        border-radius: 25px;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        border: 1px solid black;
        position: relative;
      }

      .logout-btn {
        position: fixed;
        top: 20px;
        right: 30px;
        padding: 8px 20px;
        background-color: #f5f5f5;
        color: #333;
        border: 1px solid #ddd;
        border-radius: 30px;
        cursor: pointer;
        font-family: "Reem Kufi Fun", Arial, sans-serif;
        font-weight: 500;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        z-index: 100;
        transition: background-color 0.3s ease;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .logout-btn img {
        width: 16px;
        height: 16px;
        filter: brightness(0);
        opacity: 0.7;
      }

      .logout-btn:hover {
        background-color: #e8e8e8;
      }

      .nav-item {
        display: flex;
        align-items: center;
        color: #888;
        text-decoration: none;
        padding: 8px 15px;
        cursor: pointer;
        transition: color 0.3s ease, filter 0.3s ease, opacity 0.3s ease;
        position: relative;
        z-index: 2;
      }

      .nav-item.active {
        color: black;
        font-weight: bold;
      }

      .nav-item:hover {
        color: #555;
      }

      .nav-item img {
        width: 20px;
        margin-right: 8px;
        filter: grayscale(100%);
        opacity: 0.6;
        transition: filter 0.3s ease, opacity 0.3s ease;
      }

      .nav-item.active img {
        filter: grayscale(0%);
        opacity: 1;
        filter: brightness(0);
      }

      .nav-item:hover img {
        opacity: 0.8;
      }

      .slider {
        position: absolute;
        bottom: 0;
        height: 3px;
        background-color: #000000;
        transition: all 0.3s ease;
        z-index: 1;
      }

      /* Content Sections */
      .content-section {
        display: none;
        animation-duration: 0.5s;
        animation-fill-mode: both;
        width: 100%;
        position: absolute;
        opacity: 0;
        pointer-events: none;
        overflow: hidden; /* Ensure all sections have hidden overflow */
        height: calc(100% - 100px); /* Adjust based on header height */
      }

      .content-section.active {
        display: block;
        position: relative;
        opacity: 1;
        pointer-events: auto;
        overflow: hidden;
      }

      @keyframes slideInFromRight {
        0% {
          transform: translateX(100%);
        }
        100% {
          transform: translateX(0);
        }
      }

      @keyframes slideInFromLeft {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(0);
        }
      }

      @keyframes slideOutToLeft {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-100%);
        }
      }

      @keyframes slideOutToRight {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .slide-in-right {
        animation-name: slideInFromRight;
      }

      .slide-in-left {
        animation-name: slideInFromLeft;
      }

      .slide-out-left {
        animation-name: slideOutToLeft;
      }

      .slide-out-right {
        animation-name: slideOutToRight;
      }

      /* Home Section Styles */
      .profile-section {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        margin-top: 20px; /* Reduced from 30px */
        margin-bottom: 20px; /* Reduced from 30px */
      }

      .profile-pic {
        width: 100px; /* Reduced from 120px */
        height: 100px; /* Reduced from 120px */
        background-color: #222;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 20px;
      }

      .profile-pic img {
        width: 60px; /* Reduced from 70px */
      }

      .profile-info {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .profile-name {
        font-size: 28px; /* Reduced from 32px */
        font-weight: bold;
        margin-bottom: 5px;
        text-align: left;
      }

      .student-id {
        font-size: 18px; /* Reduced from 20px */
        color: #666;
        margin-bottom: 0;
        text-align: left;
      }

      .contact-section {
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
        padding-bottom: 20px;
        overflow: hidden; /* Add this to prevent scrolling */
      }

      .contact-header {
        font-weight: bold;
        border-bottom: 1px solid #333;
        padding-bottom: 3px; /* Reduced from 5px */
        margin-bottom: 10px; /* Reduced from 15px */
        font-size: 16px; /* Reduced from 18px */
      }

      .contact-info {
        margin-bottom: 20px; /* Reduced from 30px */
      }

      .contact-row {
        display: flex;
        margin-bottom: 8px; /* Reduced from 10px */
      }

      .contact-label {
        font-weight: bold;
        width: 180px;
        font-size: 14px; /* Reduced from 16px */
      }

      .contact-value {
        flex: 1;
        font-size: 14px; /* Reduced from 16px */
      }

      /* Communications Section Styles */
      .chat-container {
        display: flex;
        height: 450px; /* Reduced from 500px */
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        background-color: white;
        margin: 20px auto;
        max-width: 1100px;
      }

      .contacts-panel {
        width: 320px;
        background-color: #f0f0f0;
        border-right: 1px solid #ddd;
        display: flex;
        flex-direction: column;
      }

      .contacts-header {
        padding: 15px;
        border-bottom: 1px solid #ddd;
      }

      .contacts-header h3 {
        margin: 0;
        font-size: 18px;
        font-weight: bold;
        text-transform: uppercase;
        border-bottom: 2px solid #000;
        padding-bottom: 5px;
        display: inline-block;
      }

      .contacts-list {
        flex: 1;
        overflow-y: auto;
      }

      .contact {
        display: flex;
        padding: 15px;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        align-items: center;
      }

      .contact:hover {
        background-color: #e8e8e8;
      }

      .contact.active {
        background-color: #e0e0e0;
      }

      .contact-avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #ccc;
        margin-right: 15px;
        flex-shrink: 0;
      }

      .contact-info {
        flex: 1;
        min-width: 0;
      }

      .contact-name {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .contact-preview {
        color: #666;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 14px;
        display: flex;
        align-items: center;
      }

      .contact-preview::before {
        content: "";
        display: inline-block;
        width: 14px;
        height: 14px;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234285f4"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>');
        background-size: contain;
        margin-right: 5px;
        flex-shrink: 0;
      }

      .contact-time {
        color: #666;
        font-size: 12px;
        white-space: nowrap;
        margin-left: 10px;
      }

      .chat-panel {
        flex: 1;
        display: flex;
        flex-direction: column;
        background-color: white;
      }

      .chat-header {
        padding: 15px;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
      }

      .chat-header-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #ccc;
        margin-right: 15px;
      }

      .chat-header-name {
        font-weight: bold;
        font-size: 18px;
      }

      .chat-messages {
        flex: 1;
        padding: 15px;
        overflow: hidden; /* Changed from auto to hidden */
        display: flex;
        flex-direction: column;
      }

      .chat-message {
        padding: 10px 15px;
        border-radius: 15px;
        margin-bottom: 10px;
        max-width: 70%; /* Limit message width */
        word-wrap: break-word;
      }

      .received-message {
        background-color: #f0f0f0;
        align-self: flex-start;
      }

      .sent-message {
        background-color: #dcf8c6;
        align-self: flex-end;
      }

      .message-content {
        margin: 0;
        font-size: 14px;
        line-height: 1.4;
        max-height: 80px; /* Reduced from 120px */
        overflow: hidden; /* Changed from auto to hidden */
      }

      .message-time {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
        display: flex;
        align-items: center;
      }

      .sent-message .message-time {
        justify-content: flex-end;
      }

      .message-status {
        display: inline-block;
        width: 14px;
        height: 14px;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234285f4"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/></svg>');
        background-size: contain;
        margin-left: 5px;
      }

      .chat-input {
        padding: 15px;
        border-top: 1px solid #ddd;
        display: flex;
      }

      .chat-input input {
        flex: 1;
        padding: 10px 15px;
        border: 1px solid #ddd;
        border-radius: 30px;
        outline: none;
      }

      .chat-input button {
        margin-left: 10px;
        padding: 10px 20px;
        background-color: #4285f4;
        color: white;
        border: none;
        border-radius: 30px;
        cursor: pointer;
      }

      .chat-input button:hover {
        background-color: #3367d6;
      }

      /* Time Table Section Styles */
      .timetable-container {
        width: 80%;
        max-width: 800px;
        margin: 70px auto; /* Changed from 20px to 70px to move it down */
      }

      .timetable {
        width: 100%;
        border-collapse: collapse;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        background-color: white;
        font-size: 0.9em; /* Added to make table more compact */
      }

      .timetable th,
      .timetable td {
        border: 1px solid #ddd;
        padding: 8px; /* Reduced from 12px */
        text-align: center;
      }

      .timetable th {
        background-color: #f0f0f0;
        font-weight: bold;
      }

      .timetable th:first-child {
        background-color: #6c757d;
        color: white;
      }

      .timetable td:first-child {
        background-color: #6c757d;
        color: white;
        font-weight: bold;
      }

      .timetable tr:first-child th {
        background-color: #c8d6e5;
      }

      .timetable td {
        background-color: #f8d7da;
      }

      /* Notice Section - Blackboard Styles */
      .blackboard-container {
        width: 60%;
        max-width: 800px;
        margin: 20px auto;
        background-color: #007a0c;
        border: 25px solid #c76300;
        padding: 20px 30px;
        color: white;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        position: relative;
        height: 380px;
        display: flex;
        flex-direction: column;
        /* Add these properties to create the raised border effect */
        border-style: solid;
        border-color: #c76300;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2),
          inset 0 0 10px rgba(0, 0, 0, 0.5);
        /* Add a subtle bevel effect to the border */
        border-image: linear-gradient(
            45deg,
            #a55200,
            #c76300,
            #e07400,
            #c76300,
            #a55200
          )
          1;
      }

      .blackboard-title {
        font-size: 24px;
        font-weight: bold;
        text-align: center;
        margin-bottom: 20px;
        position: relative;
      }

      .blackboard-content-wrapper {
        flex: 1;
        overflow-y: auto;
        padding-right: 10px;
        max-height: 280px;
        /* Remove the 'none' values to make scrollbars visible */
        scrollbar-width: thin; /* Firefox */
        -ms-overflow-style: auto; /* IE and Edge */
      }

      .blackboard-content-wrapper::-webkit-scrollbar {
        width: 8px;
        display: block; /* Ensure scrollbar is visible */
      }

      .blackboard-content-wrapper::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
      }

      .blackboard-content-wrapper::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
      }

      .blackboard-content-wrapper::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }

      .blackboard-content {
        font-size: 16px;
        line-height: 1.5;
        text-align: left;
      }

      /* Ensure the text looks like the image */
      .chalk-text {
        font-family: "Reem Kufi Fun", sans-serif;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      /* Notice containers list - remove its scrollbar to avoid double scrollbars */
      .notice-list {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 20px;
        padding-right: 10px;
        /* Remove overflow to prevent double scrollbars */
        overflow: visible;
      }

      /* Remove specific scrollbar styling from notice-list */
      .notice-list::-webkit-scrollbar {
        display: none;
      }

      .notice-container {
        background-color: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 5px;
        padding: 15px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        position: relative;
      }

      .notice-container:hover {
        background-color: rgba(255, 255, 255, 0.2);
      }

      .notice-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 5px;
        font-size: 14px;
        color: rgba(255, 255, 255, 0.8);
      }

      .notice-title {
        font-weight: bold;
        font-size: 16px;
        margin-bottom: 5px;
      }

      .notice-preview {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 14px;
      }

      /* Empty state message */
      .empty-notice-message {
        text-align: center;
        margin-top: 100px;
        color: rgba(255, 255, 255, 0.7);
        font-style: italic;
      }

      /* Notice detail view */
      .notice-detail {
        display: none;
        height: 100%;
        margin-top: 20px; /* Add margin to move content down */
      }

      .notice-detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .notice-detail-title {
        font-size: 18px;
        font-weight: bold;
      }

      .notice-detail-date {
        font-size: 14px;
        color: rgba(255, 255, 255, 0.8);
      }

      .notice-detail-content {
        flex: 1;
        overflow-y: auto;
        max-height: 220px; /* Set a max height to enable scrolling */
        scrollbar-width: thin; /* Firefox */
        -ms-overflow-style: auto; /* IE and Edge */
        padding-right: 10px;
      }

      .notice-detail-content::-webkit-scrollbar {
        width: 8px;
        display: block; /* Show scrollbar */
      }

      .notice-detail-content::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
      }

      .notice-detail-content::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
      }

      .notice-detail-content::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }

      /* Back button */
      .back-button {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 16px;
        display: flex;
        align-items: center;
        padding: 0;
        margin-right: 10px;
        font-family: "Reem Kufi Fun", sans-serif; /* Match the font family */
      }

      .back-button::before {
        content: "←";
        margin-right: 5px;
      }

      /* Add this CSS for the filter dropdown */
      .notice-filter {
        position: absolute;
        top: 20px;
        right: 30px;
        z-index: 10;
      }

      .notice-filter select {
        background-color: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.4);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-family: "Reem Kufi Fun", sans-serif;
        font-size: 14px;
        cursor: pointer;
        outline: none;
      }

      .notice-filter select:hover {
        background-color: rgba(255, 255, 255, 0.3);
      }

      .notice-filter select option {
        background-color: #007a0c;
        color: white;
      }

      /* Add this to create a header container for both title and filter */
      .blackboard-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        position: relative;
      }

      /* Student Report Section */
      #student-report {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
        height: calc(100% - 120px);
        overflow: hidden;
      }

      #student-report h2 {
        font-size: 24px;
        margin-bottom: 15px;
        text-align: center;
        width: 100%;
      }

      #student-report p {
        font-size: 16px;
        text-align: center;
        max-width: 80%;
      }

      /* Home Section */
      #home {
        overflow: hidden !important; /* Keep this */
        height: auto !important; /* Change this */
        max-height: calc(100vh - 180px) !important; /* Adjust the value */
        padding-bottom: 20px;
        position: relative !important; /* Add this */
      }

      /* Sticky Notes for Student Report */
      .sticky-notes-container {
        display: flex;
        justify-content: space-around; /* Distribute squares evenly */
        flex-wrap: nowrap; /* Prevent wrapping, keep in one row */
        gap: 20px;
        margin-top: 70px;
        max-width: 900px; /* Limit container width if needed */
        margin-left: auto;
        margin-right: auto;
        position: relative;
        left: -20px; /* Shift container to the left */
      }

      .sticky-note-button {
        width: 200px;
        height: 200px;
        cursor: pointer;
        text-align: center;
        font-size: 28px;
        font-weight: bold;
        transition: all 0.3s ease;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 10px;
        background: url("static/Images/Frame 3.svg") no-repeat center center;
        background-size: contain;
        border: none;
        filter: drop-shadow(
          0px 2px 4px rgba(0, 0, 0, 0.4)
        ); /* Even darker default shadow */
        color: black;
      }

      /* Remove previous pseudo-elements */
      .sticky-note-button::before,
      .sticky-note-button::after,
      .sticky-note-button > span::before {
        display: none;
      }

      .sticky-note-button:hover {
        transform: translateY(-15px);
        filter: drop-shadow(
          0px 15px 15px rgba(0, 0, 0, 0.8)
        ); /* Much darker hover shadow */
      }

      .sticky-note-button:active {
        transform: translateY(-5px);
        filter: drop-shadow(
          0px 5px 10px rgba(0, 0, 0, 0.6)
        ); /* Darker active shadow */
      }

      .sticky-note-button:nth-child(2) {
        /* Targets the Pre-Primary sticky note */
        padding-left: 30px; /* Shifts the text to the right */
      }

      /* Add this new section inside the student-report section */
      .report-detail-view {
        width: 90%;
        height: 100%;
        position: absolute;
        top: -60px; /* Further shifted upward from -40px */
        left: 0; /* Center horizontally instead of -20px */
        right: 0; /* Added to ensure proper centering */
        margin-left: auto; /* Added for horizontal centering */
        margin-right: auto; /* Added for horizontal centering */
        background-color: transparent;
        z-index: 10;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .back-nav {
        margin-top: 40px; /* Increased from 20px to move the button further down */
        margin-bottom: 10px;
        align-self: flex-start;
        margin-left: 60px;
      }

      /* Student report back button - we need a specific class to avoid conflicts with notice */
      .student-back-button {
        background: none;
        border: none;
        font-family: "Reem Kufi Fun", sans-serif;
        font-size: 25px;
        cursor: pointer;
        padding: 5px 0;
        display: flex;
        align-items: center;
      }

      .student-profile-summary {
        margin-top: -10px; /* Move upward */
        margin-bottom: 10px; /* Reduced from 20px to move content up */
        display: flex;
        justify-content: center;
        width: 100%;
      }

      .profile-image {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background-color: #222;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 10px;
      }

      .profile-image img {
        width: 60px;
      }

      .profile-details {
        text-align: center;
      }

      .profile-details h2 {
        margin: 5px 0;
        font-size: 24px;
      }

      .profile-details p {
        margin: 0;
        color: #666;
      }

      .marks-table-container {
        width: 80%;
        max-width: 800px;
        margin: 0 auto;
      }

      .marks-table {
        width: 80%;
        max-width: 800px;
        border-collapse: collapse;
        margin: 10px auto;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .marks-table th,
      .marks-table td {
        padding: 8px;
        text-align: center;
        border: 1px solid black;
      }

      .marks-table th {
        background-color: #b8c4de;
        font-weight: bold;
      }

      .marks-table td {
        background-color: #f8d1cc;
        height: 30px;
      }

      /* Ensure the report detail view uses the same profile layout as home */
      .report-detail-view .profile-section {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
        margin-bottom: 20px;
      }

      .report-detail-view .profile-pic {
        width: 100px;
        height: 100px;
        background-color: #222;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-right: 20px;
      }

      .report-detail-view .profile-pic img {
        width: 60px;
      }

      .report-detail-view .profile-info {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
      }

      .report-detail-view .profile-name {
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 5px;
        text-align: left;
      }

      .report-detail-view .student-id {
        font-size: 18px;
        color: #666;
        margin-bottom: 0;
        text-align: left;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="logo">
          <img src="static/images/Group - Logo.jpg" alt="Tiny Wonders Logo" />
        </div>
        <div class="nav-bar">
          <a
            href="#home"
            class="nav-item active"
            data-index="0"
            onclick="switchSection(this, 'home')"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/1946/1946436.png"
              alt="Home"
            />
            Home
          </a>
          <a
            href="#student-report"
            class="nav-item"
            data-index="1"
            onclick="switchSection(this, 'student-report')"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/3135/3135673.png"
              alt="Student Report"
            />
            Student Report
          </a>
          <a
            href="#time-table"
            class="nav-item"
            data-index="2"
            onclick="switchSection(this, 'time-table')"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/2693/2693570.png"
              alt="Time Table"
            />
            Time Table
          </a>
          <!--
                <a href="#communications" class="nav-item" data-index="3" onclick="switchSection(this, 'communications')">
                    <img src="https://cdn-icons-png.flaticon.com/512/1380/1380370.png" alt="Communications">
                    Communications
                </a>
                -->
          <a
            href="#notice"
            class="nav-item"
            data-index="4"
            onclick="switchSection(this, 'notice')"
          >
            <img
              src="https://cdn-icons-png.flaticon.com/512/1157/1157000.png"
              alt="Notice"
            />
            Notice
          </a>
          <div class="slider"></div>
          <button class="logout-btn" onclick="window.location.href='/logout';">
            <img
              src="https://cdn-icons-png.flaticon.com/512/1828/1828479.png"
              alt="Logout"
            />
            Logout
          </button>
        </div>
      </div>

      <!-- Home Section -->
      <div id="home" class="content-section active">
        <div class="profile-section">
          <div class="profile-pic">
            <img
              src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png"
              alt="Profile"
            />
          </div>
          <div class="profile-info">
            <div class="profile-name">Welcome, {{ current_user[0] }}</div>
            <div class="student-id">Roll Number: {{ current_user[1] }}</div>
          </div>
        </div>

        <div class="contact-section">
          <div class="contact-info">
            <div class="contact-header">CLASS CONTACT</div>
            <div class="contact-row">
              <div class="contact-label">Class: {{ contact_details[1] }}</div>
              <div class="contact-value"></div>
            </div>
            <div class="contact-row">
              <div class="contact-label">
                Class Teacher: {{ contact_details[2] }}
              </div>
              <div class="contact-value"></div>
            </div>
          </div>

          <div class="contact-info">
            <div class="contact-header">PARENT CONTACT</div>
            <div class="contact-row">
              <div class="contact-label">
                Mother's Name: {{ contact_details[3] }}
              </div>
              <div class="contact-value"></div>
            </div>
            <div class="contact-row">
              <div class="contact-label">
                Mother's Mobile No: {{ contact_details[4] }}
              </div>
              <div class="contact-value"></div>
            </div>
            <div class="contact-row">
              <div class="contact-label">
                Father's Name: {{ contact_details[5] }}
              </div>
              <div class="contact-value"></div>
            </div>
            <div class="contact-row">
              <div class="contact-label">
                Father's Mobile No: {{ contact_details[6] }}
              </div>
              <div class="contact-value"></div>
            </div>
            <div class="contact-row">
              <div class="contact-label">
                Parent's Email: {{ contact_details[7] }}
              </div>
              <div class="contact-value"></div>
            </div>
            <div class="contact-row">
              <div class="contact-label">
                Student avails van Facility? {{ contact_details[8] }}
              </div>
              <div class="contact-value"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Student Report Section -->
      <div id="student-report" class="content-section">
        <h2>Student Report</h2>
        <div class="sticky-notes-container">
          <div class="sticky-note-button"><span></span>Nursery</div>
          <div class="sticky-note-button"><span></span>Pre-Primary</div>
          <div class="sticky-note-button"><span></span>LKG</div>
        </div>
        <!-- Add this new section inside the student-report section -->
        <div
          id="student-report-detail"
          class="report-detail-view"
          style="display: none"
        >
          <div class="back-nav">
            <button
              class="student-back-button"
              onclick="showStudentReportMain()"
            >
              ← Back
            </button>
          </div>

          <div class="student-profile-summary">
            <div class="profile-section">
              <div class="profile-pic">
                <img
                  src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png"
                  alt="Profile"
                />
              </div>
              <div class="profile-info">
                <div class="profile-name">Welcome, {{ current_user[0] }}</div>
                <div class="student-id">Roll Number: {{ current_user[1] }}</div>
              </div>
            </div>
          </div>

          <div class="marks-table-container">
            <table class="marks-table">
              <thead>
                <tr>
                  <th>Subject</th>
                  <th>Marks</th>
                </tr>
              </thead>
              <tbody>
                {% for subject, marks in report_card_data %}
                <tr>
                  <td>{{ subject }}</td>
                  <td>{{ marks }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Time Table Section -->
      <div id="time-table" class="content-section">
        <div class="timetable-container">
          <table class="timetable">
            <tr>
              <th></th>
              <th>Monday</th>
              <th>Tuesday</th>
              <th>Wednesday</th>
              <th>Thursday</th>
              <th>Friday</th>
              <th>Saturday</th>
            </tr>
            {% for row in data %}
            <tr>
              <td>{{ row[1] }}</td>
              <!-- Time Slot -->
              {% for subject in row[2:] %}
              <!-- Loop through Monday to Saturday -->
              <td>{{ subject }}</td>
              {% endfor %}
            </tr>
            {% endfor %}
          </table>
        </div>
      </div>

      <!-- Communications Section 
        <div id="communications" class="content-section">
            <div class="chat-container">
                <div class="contacts-panel">
                    <div class="contacts-header">
                        <h3>CONTACTS</h3>
                    </div>
                    <div class="contacts-list">
                        <div class="contact active" onclick="setActiveContact(this)">
                            <div class="contact-avatar"></div>
                            <div class="contact-info">
                                <div class="contact-name">Teacher1</div>
                                <div class="contact-preview">Lorem Ipsum Dolor Sit Amet, C...</div>
                            </div>
                            <div class="contact-time">08:00 PM</div>
                        </div>
                        <div class="contact" onclick="setActiveContact(this)">
                            <div class="contact-avatar"></div>
                            <div class="contact-info">
                                <div class="contact-name">Teacher2</div>
                                <div class="contact-preview">Lorem Ipsum Dolor Sit Amet, C...</div>
                            </div>
                            <div class="contact-time">08:00 PM</div>
                        </div>
                        <div class="contact" onclick="setActiveContact(this)">
                            <div class="contact-avatar"></div>
                            <div class="contact-info">
                                <div class="contact-name">Teacher3</div>
                                <div class="contact-preview">Lorem Ipsum Dolor Sit Amet, C...</div>
                            </div>
                            <div class="contact-time">08:00 PM</div>
                        </div>
                        <div class="contact" onclick="setActiveContact(this)">
                            <div class="contact-avatar"></div>
                            <div class="contact-info">
                                <div class="contact-name">Teacher4</div>
                                <div class="contact-preview">Lorem Ipsum Dolor Sit Amet, C...</div>
                            </div>
                            <div class="contact-time">08:00 PM</div>
                        </div>
                    </div>
                </div>
                <div class="chat-panel">
                    <div class="chat-header">
                        <div class="chat-header-avatar"></div>
                        <div class="chat-header-name">Teacher1</div>
                    </div>
                    <div class="chat-messages">
                    </div>
                    <div class="chat-input">
                        <input type="text" placeholder="Type a message..." id="messageInput" onkeypress="handleKeyPress(event)">
                        <button onclick="sendMessage()">Send</button>
                    </div>
                </div>
            </div>
        </div>
        -->

      <!-- Notice Section -->
      <div id="notice" class="content-section">
        <div
          class="blackboard-container"
          style="background-color: #007a0c; border: 25px solid #c76300"
        >
          <div class="blackboard-header">
            <div class="blackboard-title chalk-text">NOTICE</div>

            <!-- Notice Filter Dropdown -->
            <div class="notice-filter" id="noticeFilter">
              <select id="noticeFilterSelect" onchange="filterNotices()">
                <option value="all">All Notices</option>
                <option value="today">Today</option>
                <option value="week">This Week</option>
                <option value="month">This Month</option>
              </select>
            </div>
          </div>

          <!-- Notice List View -->
          <div id="noticeListView" class="blackboard-content-wrapper">
            <!--
                    <div id="noticeList" class="notice-list chalk-text">
                        {% if notices %}
                            {% for notice in notices %}
                                <div class="notice-item">
                                    <strong>{{ notice[1] }}</strong>  
                                    <p>{{ notice[2] }}</p>           
                                    <small>{{ notice[3] }}</small>   
                                </div>
                            {% endfor %}
                        {% else %}
                            <div id="emptyNoticeMessage" class="empty-notice-message chalk-text">
                                No notices available.
                            </div>
                        {% endif %}
                    </div>
                    -->

            <div id="noticeList" class="notice-list chalk-text">
              <!--Notice containers will be added here dynamically-->
            </div>
            <div
              id="emptyNoticeMessage"
              class="empty-notice-message chalk-text"
            >
              No notices available.
            </div>
          </div>

          <!-- Notice Detail View -->
          <div id="noticeDetailView" class="notice-detail">
            <div class="notice-detail-header chalk-text">
              <button class="back-button chalk-text" onclick="showNoticeList()">
                Back
              </button>
              <div class="notice-detail-title" id="noticeDetailTitle"></div>
              <div class="notice-detail-date" id="noticeDetailDate"></div>
            </div>
            <div
              class="notice-detail-content chalk-text"
              id="noticeDetailContent"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Initialize the slider position on page load
      document.addEventListener("DOMContentLoaded", function () {
        const activeItem = document.querySelector(".nav-item.active");
        if (activeItem) {
          positionSlider(activeItem);
        }

        // Check if there's a hash in the URL and switch to that section
        const hash = window.location.hash.substring(1);
        if (hash) {
          const navItem = document.querySelector(`a[href="#${hash}"]`);
          if (navItem) {
            switchSection(navItem, hash);
          }
        }

        // Initialize notices with sample data
        initializeNotices();

        // Add wheel event listeners for proper scrolling in notice sections
        setupNoticeScrolling();
      });

      // Setup proper scrolling behavior for notices
      function setupNoticeScrolling() {
        // Get notice elements for scrolling
        const noticeListView = document.getElementById("noticeListView");
        const noticeDetailContent = document.getElementById(
          "noticeDetailContent"
        );

        // Add wheel event handling for notice list wrapper
        noticeListView.addEventListener("wheel", function (e) {
          if (noticeListView.scrollHeight > noticeListView.clientHeight) {
            e.preventDefault(); // Prevent the default page scrolling
            noticeListView.scrollTop += e.deltaY; // Scroll the container instead
          }
        });

        // Add wheel event handling for notice detail content
        noticeDetailContent.addEventListener("wheel", function (e) {
          if (
            noticeDetailContent.scrollHeight > noticeDetailContent.clientHeight
          ) {
            e.preventDefault(); // Prevent the default page scrolling
            noticeDetailContent.scrollTop += e.deltaY; // Scroll the container instead
          }
        });
      }

      function positionSlider(element) {
        const slider = document.querySelector(".slider");

        // Set the width and position of the slider to match the active element
        slider.style.width = element.offsetWidth + "px";
        slider.style.left = element.offsetLeft + "px";
      }

      function switchSection(element, sectionId) {
        // Get current and target indices
        const currentIndex = parseInt(
          document.querySelector(".nav-item.active").dataset.index
        );
        const targetIndex = parseInt(element.dataset.index);

        // Determine direction of transition
        const direction = targetIndex > currentIndex ? "right" : "left";

        // Get current active section
        const currentSection = document.querySelector(
          ".content-section.active"
        );
        const targetSection = document.getElementById(sectionId);

        if (!targetSection || currentSection === targetSection) return;

        // Prevent scrolling during transition
        document.body.style.overflow = "hidden";

        // Set active state for navigation
        const navItems = document.querySelectorAll(".nav-item");
        navItems.forEach((item) => {
          item.classList.remove("active");
        });
        element.classList.add("active");
        positionSlider(element);

        // Update URL hash without scrolling
        history.pushState(null, null, `#${sectionId}`);

        // Hide all sections first
        document.querySelectorAll(".content-section").forEach((section) => {
          if (section !== currentSection) {
            section.classList.remove("active");
            section.style.display = "none";
          }
          section.classList.remove(
            "slide-out-left",
            "slide-out-right",
            "slide-in-left",
            "slide-in-right"
          );
        });

        // Apply animations
        currentSection.style.display = "block"; // Temporarily show for animation
        currentSection.classList.add(
          direction === "right" ? "slide-out-left" : "slide-out-right"
        );
        currentSection.style.animationDuration = "0.3s";

        // After current section starts sliding out
        setTimeout(() => {
          // Hide current section completely
          currentSection.style.display = "none";
          currentSection.classList.remove("active");
          currentSection.classList.remove("slide-out-left", "slide-out-right");

          // Show and animate target section
          targetSection.classList.add("active");
          targetSection.style.display = "block";
          targetSection.classList.add(
            direction === "right" ? "slide-in-right" : "slide-in-left"
          );
          targetSection.style.animationDuration = "0.3s";

          // Remove animation class after it completes
          setTimeout(() => {
            targetSection.classList.remove("slide-in-right", "slide-in-left");
            // Re-enable scrolling after animation completes
            document.body.style.overflow = "";
          }, 300);
        }, 300);
      }

      // Chat functionality
      function setActiveContact(contactElement) {
        // Remove active class from all contacts
        document.querySelectorAll(".contact").forEach((contact) => {
          contact.classList.remove("active");
        });

        // Add active class to clicked contact
        contactElement.classList.add("active");

        // Update chat header with contact name and avatar
        const contactName =
          contactElement.querySelector(".contact-name").textContent;
        document.querySelector(".chat-header-name").textContent = contactName;

        // Clear current messages
        const chatMessages = document.querySelector(".chat-messages");
        chatMessages.innerHTML = "";

        // Add appropriate messages based on selected contact
        if (contactName === "Teacher1") {
          // First message - received
          addMessage(
            "received",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit, Sed Do Eiusmod Tempor Incididunt Ut Labore Et Dolore Magna Aliqua. Ut Enim Ad Minim Veniam, Quis Nostrud Exercitation Ullamco Laboris Nisi Ut Aliquip Ex Ea Commodo Consequat. Duis Aute Irure Dolor In Reprehenderit In Voluptate Velit Esse Cillum Dolore Eu Fugiat Nulla Pariatur. Excepteur Sint Occaecat Cupidatat Non Proident, Sunt In Culpa Qui Officia Deserunt Mollit Anim Id Est Laborum.",
            "08:00 PM"
          );

          // Short sent message with checkmark
          addMessage(
            "sent",
            "Lorem Ipsum Dolor Sit Amet, C...",
            "08:00 PM",
            true
          );

          // Second received message
          addMessage(
            "received",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit, Sed Do Eiusmod Tempor Incididunt Ut Labore Et Dolore Magna Aliqua. Ut Enim Ad Minim Veniam, Quis Nostrud Exercitation Ullamco Laboris Nisi.",
            "08:00 PM"
          );

          // Second sent message with checkmark
          addMessage(
            "sent",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit, Sed Do Eiusmod Tempor Incididunt Ut Labore Et Dolore Magna Aliqua. Ut Enim Ad Minim Veniam, Quis Nostrud Exercitation Ullamco Laboris Nisi.",
            "08:00 PM",
            true
          );
        } else if (contactName === "Teacher2") {
          addMessage(
            "received",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit.",
            "08:00 PM"
          );
          addMessage(
            "sent",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit.",
            "08:00 PM",
            true
          );
        } else if (contactName === "Teacher3") {
          addMessage(
            "received",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit.",
            "08:00 PM"
          );
          addMessage(
            "sent",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit.",
            "08:00 PM",
            true
          );
        } else if (contactName === "Teacher4") {
          addMessage(
            "received",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit.",
            "08:00 PM"
          );
          addMessage(
            "sent",
            "Lorem Ipsum Dolor Sit Amet, Consectetur Adipiscing Elit.",
            "08:00 PM",
            true
          );
        }
      }

      function addMessage(type, text, time, hasCheckmark = false) {
        const chatMessages = document.querySelector(".chat-messages");
        const messageDiv = document.createElement("div");
        messageDiv.className = `chat-message ${type}-message`;

        let messageHTML = `
                <p class="message-content">${text}</p>
                <div class="message-time">
                    ${time}
                    ${
                      hasCheckmark ? '<span class="message-status"></span>' : ""
                    }
                </div>
            `;

        messageDiv.innerHTML = messageHTML;
        chatMessages.appendChild(messageDiv);

        // Scroll to the bottom of the chat
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function sendMessage() {
        const messageInput = document.getElementById("messageInput");
        const messageText = messageInput.value.trim();

        if (messageText) {
          // Add the sent message to the chat
          addMessage("sent", messageText, getCurrentTime(), true);

          // Clear the input field
          messageInput.value = "";

          // Simulate a reply after a short delay
          setTimeout(() => {
            const activeContact = document.querySelector(
              ".contact.active .contact-name"
            ).textContent;
            addMessage(
              "received",
              `This is a response from ${activeContact}.`,
              getCurrentTime()
            );
          }, 1000);
        }
      }

      function handleKeyPress(event) {
        if (event.key === "Enter") {
          sendMessage();
        }
      }

      function getCurrentTime() {
        const now = new Date();
        let hours = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, "0");
        const ampm = hours >= 12 ? "PM" : "AM";

        hours = hours % 12;
        hours = hours ? hours : 12; // Convert 0 to 12

        return `${hours}:${minutes} ${ampm}`;
      }

      // Initialize the first contact as active when the page loads
      document.addEventListener("DOMContentLoaded", function () {
        // Set the first contact as active
        const firstContact = document.querySelector(".contacts-list .contact");
        if (firstContact) {
          setActiveContact(firstContact);
        }

        // Initialize section based on URL hash
        const hash = window.location.hash.substring(1);
        if (hash) {
          const section = document.getElementById(hash);
          if (section) {
            const navItem = document.querySelector(
              `.nav-item[data-section="${hash}"]`
            );
            if (navItem) {
              switchSection(navItem, hash);
            }
          }
        }
      });

      function showStudentReportDetail(classLevel) {
        // Hide the main student report view
        document.querySelector(".sticky-notes-container").style.display =
          "none";
        document.querySelector("#student-report h2").style.display = "none";

        // Show the detail view
        document.getElementById("student-report-detail").style.display =
          "block";

        // You could customize the detail view based on the class level
        console.log(`Showing report for ${classLevel}`);
      }

      function showStudentReportMain() {
        // Hide the detail view
        document.getElementById("student-report-detail").style.display = "none";

        // Show the main student report view
        document.querySelector(".sticky-notes-container").style.display =
          "flex";
        document.querySelector("#student-report h2").style.display = "block";
      }

      // Update event listeners for sticky notes
      document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".sticky-note-button").forEach((button) => {
          button.addEventListener("click", function () {
            const classLevel = this.textContent.trim();
            showStudentReportDetail(classLevel);
          });
        });
      });

      // Notice System Functions
      let notices = []; // Array to store all notices
      // Initialize with sample notices
      /*
        function initializeNotices() {
            // Sample notices
            
            const sampleNotices = [
                {
                    id: 1,
                    title: "Annual Day Celebration",
                    content: "Dear Parents, <br><br>We are excited to announce our Annual Day celebration on December 15th. All students are required to participate. Further details about costumes and rehearsals will be shared soon.<br><br>Regards,<br>Principal",
                    date: "2023-05-20 09:30 AM"
                },
                {
                    id: 2,
                    title: "Parent-Teacher Meeting",
                    content: "Dear Parents, <br><br>The Parent-Teacher Meeting is scheduled for next Friday, 25th May, from 10:00 AM to 1:00 PM. Your presence is mandatory to discuss your child's progress.<br><br>Regards,<br>Class Teacher",
                    date: "2023-05-18 11:45 AM"
                },
                {
                    id: 3,
                    title: "Holiday Notice",
                    content: "Dear Parents, <br><br>The school will remain closed on Monday, 29th May, due to a public holiday. Regular classes will resume on Tuesday, 30th May.<br><br>Regards,<br>School Administration",
                    date: "2023-05-15 02:15 PM"
                },
                {
                    id: 4,
                    title: "Sports Day Announcement",
                    content: "Dear Parents, <br><br>We are pleased to announce our Annual Sports Day on June 10th. All students are required to participate in at least one event. Registration for events will begin next week.<br><br>Regards,<br>Sports Department",
                    date: "2023-05-14 10:30 AM"
                },
                {
                    id: 5,
                    title: "Vaccination Drive",
                    content: "Dear Parents, <br><br>The school is organizing a vaccination camp on June 5th. Please ensure that your child's vaccination records are up to date. A consent form will be sent home with your child.<br><br>Regards,<br>School Nurse",
                    date: "2023-05-12 09:45 AM"
                },
                {
                    id: 6,
                    title: "School Picnic",
                    content: "Dear Parents, <br><br>We are organizing a picnic to the City Zoo on June 15th. The cost per student is $25, which includes transportation, entry fee, and lunch. Please send the money with the consent form by June 10th.<br><br>Regards,<br>Class Teacher",
                    date: "2023-05-10 01:20 PM"
                },
                {
                    id: 7,
                    title: "Summer Vacation Notice",
                    content: "Dear Parents, <br><br>The summer vacation will begin from June 20th and the school will reopen on July 15th. Holiday homework will be assigned to the students before the vacation begins.<br><br>Regards,<br>School Administration",
                    date: "2023-05-08 11:30 AM"
                },
                {
                    id: 8,
                    title: "Art Competition",
                    content: "Dear Parents, <br><br>An inter-school art competition will be held on June 8th. Interested students should register with the Art Teacher by June 1st. The theme for the competition is 'Nature and Environment'.<br><br>Regards,<br>Art Department",
                    date: "2023-05-05 03:15 PM"
                }
            ];
            
            // Add sample notices to our array

            notices = sampleNotices;
            
            // Update the UI
            updateNoticeList();
        }
        
        function updateNoticeList(filteredNotices = null) {
            const noticeList = document.getElementById('noticeList');
            const emptyMessage = document.getElementById('emptyNoticeMessage');
            const noticesToDisplay = filteredNotices || notices;
            
            // Clear the current list
            noticeList.innerHTML = '';
            
            if (noticesToDisplay.length === 0) {
                emptyMessage.style.display = 'block';
                return;
            }
            
            emptyMessage.style.display = 'none';
            
            // Add each notice to the list
            noticesToDisplay.forEach(notice => {
                const noticeElement = document.createElement('div');
                noticeElement.className = 'notice-container';
                noticeElement.dataset.id = notice.id;
                
                // Get clean text content without HTML tags
                const cleanContent = notice.content.replace(/<[^>]*>/g, ' ').trim();
                
                // Prepare preview text
                const previewText = cleanContent.substring(0, 100) + (cleanContent.length > 100 ? '...' : '');
                
                noticeElement.innerHTML = `
                    <div class="notice-header">
                        <span>${notice.date}</span>
                    </div>
                    <div class="notice-title">${notice.title}</div>
                    <div class="notice-preview">${previewText}</div>
                `;
                
                // Add click event for viewing the notice
                noticeElement.addEventListener('click', function() {
                    showNoticeDetail(notice.id);
                });
                
                noticeList.appendChild(noticeElement);
            });
        }
        */

      function initializeNotices() {
        // Get the noticeList element
        const noticeList = document.getElementById("noticeList");
        const emptyMessage = document.getElementById("emptyNoticeMessage");

        // Clear the current list
        noticeList.innerHTML = "";
        emptyMessage.style.display = "none";

        // Fetch notices from the backend
        fetch("/get_notices") // Assuming you have a Flask route at /get_notices
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((notices) => {
            if (notices.length === 0) {
              emptyMessage.style.display = "block";
              return;
            }

            // Add each notice to the list
            notices.forEach((notice) => {
              const noticeElement = document.createElement("div");
              noticeElement.className = "notice-container";
              noticeElement.dataset.id = notice.id;

              // Get clean text content without HTML tags
              const cleanContent = notice.content
                .replace(/<[^>]*>/g, " ")
                .trim();

              // Prepare preview text
              const previewText =
                cleanContent.substring(0, 100) +
                (cleanContent.length > 100 ? "..." : "");

              noticeElement.innerHTML = `
                    <div class="notice-header">
                        <span>${notice.date}</span>
                    </div>
                    <div class="notice-title">${notice.title}</div>
                    <div class="notice-preview">${previewText}</div>
                `;

              // Add click event for viewing the notice
              noticeElement.addEventListener("click", function () {
                showNoticeDetail(notice.id);
              });

              noticeList.appendChild(noticeElement);
            });
          })
          .catch((error) => {
            console.error("Error fetching notices:", error);
            // Optionally display an error message to the user
            emptyMessage.textContent = "Failed to load notices.";
            emptyMessage.style.display = "block";
          });
      }

      function updateNoticeList(filteredNotices = null) {
        const noticeList = document.getElementById("noticeList");
        const emptyMessage = document.getElementById("emptyNoticeMessage");
        const noticesToDisplay = filteredNotices || notices; // 'notices' is not defined here if you're fetching from the backend

        // Clear the current list
        noticeList.innerHTML = "";
        emptyMessage.style.display = "none";

        if (noticesToDisplay && noticesToDisplay.length === 0) {
          emptyMessage.style.display = "block";
          return;
        }

        if (noticesToDisplay) {
          // Add each notice to the list
          noticesToDisplay.forEach((notice) => {
            const noticeElement = document.createElement("div");
            noticeElement.className = "notice-container";
            noticeElement.dataset.id = notice.id;

            // Get clean text content without HTML tags
            const cleanContent = notice.content.replace(/<[^>]*>/g, " ").trim();

            // Prepare preview text
            const previewText =
              cleanContent.substring(0, 100) +
              (cleanContent.length > 100 ? "..." : "");

            noticeElement.innerHTML = `
                <div class="notice-header">
                    <span>${notice.date}</span>
                </div>
                <div class="notice-title">${notice.title}</div>
                <div class="notice-preview">${previewText}</div>
            `;

            // Add click event for viewing the notice
            noticeElement.addEventListener("click", function () {
              showNoticeDetail(notice.id);
            });

            noticeList.appendChild(noticeElement);
          });
        }
      }

      // Call initializeNotices when the page loads
      //initializeNotices();

      function showNoticeDetail(noticeId) {
        const notice = notices.find((n) => n.id === noticeId);
        if (!notice) return;

        const noticeListView = document.getElementById("noticeListView");
        const noticeDetailView = document.getElementById("noticeDetailView");
        const noticeDetailTitle = document.getElementById("noticeDetailTitle");
        const noticeDetailDate = document.getElementById("noticeDetailDate");
        const noticeDetailContent = document.getElementById(
          "noticeDetailContent"
        );
        const noticeFilter = document.getElementById("noticeFilter");

        // Populate the detail view
        noticeDetailTitle.textContent = notice.title;
        noticeDetailDate.textContent = notice.date;
        noticeDetailContent.innerHTML = notice.content;

        // Show the detail view
        noticeListView.style.display = "none";
        noticeDetailView.style.display = "block";
        noticeFilter.style.display = "none"; // Hide filter in detail view

        // Reset scroll position to the top
        noticeDetailContent.scrollTop = 0;
      }

      function showNoticeList() {
        const noticeListView = document.getElementById("noticeListView");
        const noticeDetailView = document.getElementById("noticeDetailView");
        const noticeFilter = document.getElementById("noticeFilter");

        noticeListView.style.display = "block";
        noticeDetailView.style.display = "none";
        noticeFilter.style.display = "block"; // Show filter in list view
      }

      // Filter notices by date
      function filterNotices() {
        const filterValue = document.getElementById("noticeFilterSelect").value;
        const filteredNotices = filterNoticesByDate(filterValue);
        updateNoticeList(filteredNotices);
      }

      function filterNoticesByDate(filter) {
        if (filter === "all") {
          return notices;
        }

        const now = new Date();
        const today = new Date(
          now.getFullYear(),
          now.getMonth(),
          now.getDate()
        );
        const weekAgo = new Date(today);
        weekAgo.setDate(today.getDate() - 7);
        const monthAgo = new Date(today);
        monthAgo.setMonth(today.getMonth() - 1);

        return notices.filter((notice) => {
          // Convert notice date string to Date object
          const noticeDateParts = notice.date.split(" ")[0].split("-");
          const noticeDate = new Date(
            parseInt(noticeDateParts[0]),
            parseInt(noticeDateParts[1]) - 1,
            parseInt(noticeDateParts[2])
          );

          switch (filter) {
            case "today":
              return noticeDate >= today;
            case "week":
              return noticeDate >= weekAgo;
            case "month":
              return noticeDate >= monthAgo;
            default:
              return true;
          }
        });
      }
    </script>
  </body>
</html>
